<h1 id="welcome">Welcome to StreamSearch</h1>
<div id="main">
  <h3>Search Spotify, Apple Music, and Rhapsody to find the music that you are looking for!</h3>
</div>
<!-- <div id="search-instructions">
  <h3>Search by Artist, Album, or Song</h3>
</div> -->

<div class="search-bar">

  <%= form_tag "/search" do %>
    <span><%= text_field_tag :query, nil, placeholder: 'Search by artist...', :id => "search" %></span>
    <span><%#= image_submit_tag "search.png", class: 'searchTag' %></span>
    <span><%= submit_tag :Search, class: 'searchTag' %></span>
 
  <% end %>
</div>

<div class="results">
  <div id="spotty">
    <div class="spotifyResults">
      <div id="spotify">
        <%= image_tag ("spotify2.png"), :class => "icon" %> <strong>Spotify</strong>
      </div>
    </div><br><br><br>
     <!--    <%# if @spotResults %>
          <%# @spotResults["tracks"]["items"].each do |spotResult| %>
            <ul>
              <li>Song: "<%#= spotResult["name"]%>"</li>
              <li>Album: <%#= spotResult ["album"]["name"] %></li>
              <li>Artist: <#%= spotResult["artists"][0]["name"] %></li>
              <li><%#= spotResult ["images"]["url"] %></li>
              
            </ul>
          <%# end %>
        <%# end %> -->
      <div class="spotifyResults">
        <% if @spotResults %>
          <% @spotResults["artists"]["items"].each do |spotResult| %>
            <div class="artistAlbum">
              <ul>
                <li id="spotDisplay"><%= spotResult["name"] %></li>
                <li>
                <%= link_to "Albums", spotify_albums_path(spotResult["id"]), :remote => true %>
                </li>
              </ul>  
            </div>
           
              <div id="spotifyAlbums"></div>
            <!--   <a href="https://api.spotify.com/v1/artists/<%#= spotResult["id"] %>/albums">Albums</a> -->
              </li>
              <!-- goal: display each albums title per artist -->
                  <!-- show page: link takes you to a page where you see all the albums from that artist, and we have artist id available -->


                  <!-- params: artist id,
                  new link: goes to show page, which displays all album info 
                      q: how do we get user to show page that is individual to each artist? 
                      the link to the show page is set up how? 

                  get ==> show page
                          in controller, set some instance variable to be the result of getting <a href="https://api.spotify.com/v1/artists/<%#= spotResult["id"] %>/albums">Albums</a> -->


              <%# if spotResult["images"][0] %>
            <!--   <li><%#= image_tag spotResult["images"][0]["url"], :class => "artist_img" %></li>
              <%# else %>
              <li><%#= image_tag "missingperson.png", :class => "artist_img" %> </li> -->
              
             <!--  <li> <img src='<%#=spotResult["images"][0]["url"] %>'></li> -->
              <%# end %>

            </ul>
          <% end %>
          <%# else %>
        <!-- <li>Sorry, there are no results for this search</li> -->
        <% end %>
      </div>
    </div>

  <div id="appy">
    <div class="appleResults">
      <div id="apple">
        <%= image_tag ("apple.png"), :class => "icon" %><strong>Apple Music</strong>
      </div>
    </div><br><br><br>
      <div class="appleResults">
        <% if @results %>
          <% @results.each do |result| %>
          <ul>
          <%# if result["isStreamable"] == true%>
          <div class="artistAlbum">
            <li id="spotDisplay"><%= result["artistName"] %></li>
          <!--  <li><a href="albums/<%#= result["artistId"] %>">Albums</a></li> -->
            <li>
            <%= link_to "Albums", apple_albums_path(result["artistId"]), :remote => true %>
            </li>
          </div>
            <div id="appleAlbums"></div>
           <!--  <p><%#= result["collectionName"] %> <%#= result["artistName"] %> <%#= result["trackCount"] %></p>
            <ul>  
              <li>Song: "<%#= result["trackName"] %>"</li>
              <li>Album: <%#= result["collectionName"] %></li>
              <li>Artist: <%#=result["artistName"] %></li>
            </ul> -->
            <%# end %>
          </ul>
          <% end %>
         <!--  <%# else %>
        <li>Sorry, there are no results for this search</li> -->
        <% end %>
      </div>
    </div>

  <div class="rhapResults">
    <div id="rhapsody">
      <%= image_tag ("rhapsody.png"), :class => "icon" %><strong>Rhapsody</strong>
    </div>
  </div><br><br><br>
  <div class="rhapResults">
    <% if @rhapResults %>
      <% @rhapResults.each do |rhapResult| %>
        <ul>
          <div class="artistAlbum">
            <li id="spotDisplay"><%= rhapResult["name"] %></li>
           <!--  <li><a href="albums/<%#= rhapResult["id"].gsub(/[^0-9]/, '') %>">Albums</a></li> -->
            <li>
              <%= link_to "Albums", rhapsody_albums_path(rhapResult["id"].gsub(/[^0-9]/, '')), :remote => true %><br><br><br>
            </li>
          </div>
          <div id="rhapsodyAlbums"></div>
          <li><%#= rhapResult["name"] %> <!-- Artist: --> <%#= rhapResult["artist"]["name"] %></li>
         <!--  <ul>
            <li>Song: "<%#= rhapResult["name"] %>"</li>
            <li>Album: <%#= rhapResult["album"]["name"] %></li> 
            <li>Artist: <%#= rhapResult["artist"]["name"] %></li>
          </ul> -->
        <%# else %>
       <!--    <p>Sorry, we were unable to locate any results</p> -->
        </ul>
    <% end %>
        <%# else %>
       <!--  <li>Sorry, there are no results for this search</li> -->
      <% end %>


  </div>
</div>


